{% extends "base.html" %}
{% load static %}

{% block content %}
<h2>Request a Movie</h2>

<form method="POST">
    {% csrf_token %}
    <label for="movie_name">Movie Name:</label>
    <input type="text" name="movie_name" id="movie_name" required>
    
    <label for="description">Description:</label>
    <textarea name="description" id="description" required></textarea>
    
    <button type="submit">Request Movie</button>
</form>

<hr>

<h3>My Movie Requests</h3>
{% if requests %}
    <ul>
        {% for req in requests %}
            <li>
                <strong>{{ req.movie_name }}</strong> - {{ req.description }} ({{ req.date_requested|date:"Y-m-d H:i" }})
                <form method="POST" action="{% url 'delete_movie_request' req.id %}" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit">Delete</button>
                </form>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p>You have not requested any movies yet.</p>
{% endif %}

{% endblock %}
